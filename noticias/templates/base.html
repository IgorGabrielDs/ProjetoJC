{% load static %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}JC{% endblock %}</title>
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'noticias/img/favicon-32x32.png' %}">
  <link rel="icon" type="image/png" sizes="16x16" href="{% static 'noticias/img/favicon-16x16.png' %}">
  <link rel="stylesheet" href="{% static 'noticias/css/detalhe.css' %}">
  <link rel="stylesheet" href="{% static 'noticias/css/menu.css' %}">
  <meta name="csrf-token" content="{{ csrf_token }}">

  {# botão de logout com cara de ícone #}
  <style>
    .logout-btn{
      border:0;
      background:transparent;
      padding:0;
      margin:0;
      cursor:pointer;
    }
    .logout-btn:focus{
      outline:2px solid #bbb;
      outline-offset:2px;
    }
  </style>

  {% block extra_head %}{% endblock %}
</head>

{# Opcional: expõe o nome do usuário para o modal usar se necessário #}
<body{% if user.is_authenticated %} data-username="{{ user.first_name|default:user.username }}"{% endif %}>
  <!-- ===== BARRA UOL ===== -->
  <div class="uol-bar">
    <div class="uol-container">
      <div class="uol-left">
        <a href="https://www.uol.com.br/" class="uol-logo" aria-label="UOL">
          <img src="{% static 'noticias/img/logo-uol.png' %}" alt="UOL">
        </a>

        <nav class="uol-nav">
          <a href="https://www.ingresso.com/" target="_blank">INGRESSO.COM</a>
          <a href="https://uolhost.uol.com.br/" target="_blank">UOL HOST</a>
          <a href="https://pagbank.com.br/" target="_blank">PAGBANK</a>
          <a href="https://www.portaleducacao.com.br/" target="_blank">CURSOS</a>
          <a href="https://play.uol.com.br/" target="_blank">UOL PLAY</a>
          <a href="https://ads.uol.com.br/" target="_blank">UOL ADS</a>
        </nav>
      </div>

      <div class="uol-right">
        <a href="https://busca.uol.com.br" class="uol-icon">
          <img src="{% static 'noticias/img/lupa-uol.png' %}" alt="Buscar">
          <span>BUSCA</span>
        </a>
        <a href="https://batepapo.uol.com.br/" class="uol-icon">
          <img src="{% static 'noticias/img/carta-uol.png' %}" alt="Bate-papo">
          <span>BATE-PAPO</span>
        </a>
        <a href="https://conta.uol.com.br/login" class="uol-icon">
          <img src="{% static 'noticias/img/card-uol.png' %}" alt="Email">
          <span>EMAIL</span>
        </a>
      </div>
    </div>
  </div>
  <!-- ===== /BARRA UOL ===== -->

  <!-- ===== HEADER ===== -->
  <header class="header">
    <div class="container row">
      <!-- Botão do menu lateral -->
      <button class="icon-btn" id="menu-toggle" aria-label="Abrir menu" aria-controls="menu" aria-expanded="false">
        <img src="{% static 'noticias/img/menu_hamburguer.svg' %}" alt="Abrir menu" width="28" height="28">
      </button>

      <!-- Logo JC -->
      <a href="{% url 'noticias:index' %}" class="logo-link" aria-label="Voltar para a página inicial">
        <img class="logo"
             src="{% static 'noticias/img/logo-menor-jc.png' %}"
             alt="JC Pernambuco">
      </a>

      <div style="flex:1"></div>

      <!-- Botão de busca -->
      <button class="icon-btn" aria-label="Buscar">
        <img src="{% static 'noticias/img/lupa.svg' %}" alt="Buscar" width="28" height="28">
      </button>
    </div>
  </header>

  <div id="menu-overlay" class="menu-overlay" hidden></div>

  <!-- ===== MENU LATERAL ===== -->
  <nav id="menu" class="menu" aria-hidden="true">
    <div class="menu-top">
      <img src="{% static 'noticias/img/logo-jornalcommercio.png' %}" alt="Jornal do Commercio" class="menu-logo">
      <button id="menu-close" class="menu-close" aria-label="Fechar menu">✕</button>
    </div>

    <div class="menu-user">
      {% if user.is_authenticated %}
        <div class="menu-user-icons">
          <img src="{% static 'noticias/img/editar_uol.png' %}" alt="Editar perfil" class="edit-icon" title="Editar perfil">
          <img src="{% static 'noticias/img/perfil_uol.png' %}" alt="Foto de perfil" class="avatar" title="Meu perfil">

          {# Logout deve ser POST no Django 5.x #}
          <form method="post" action="{% url 'logout' %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="logout-btn" title="Sair da conta" aria-label="Sair da conta">
              <img src="{% static 'noticias/img/sair_uol.png' %}" alt="Sair" class="logout-icon">
            </button>
          </form>
        </div>
        <p class="user-name">{{ user.get_full_name|default:user.username }}</p>
      {% else %}
        <a href="{% url 'login' %}" class="login-btn">Login</a>
      {% endif %}
    </div>

    <ul class="menu-links">
      <li class="dropdown active">
        <button class="drop-btn" aria-expanded="false">AO VIVO</button>
        <ul class="submenu">
          <li><a href="#">Rádio Jornal (RECIFE)</a></li>
          <li><a href="#">Rádio Jornal (INTERIOR)</a></li>
          <li><a href="#">TV Jornal (RECIFE)</a></li>
          <li><a href="#">TV Jornal (INTERIOR)</a></li>
        </ul>
      </li>
      <li><a href="#">Jornal Digital</a></li>
      <li class="dropdown">
        <button class="drop-btn" aria-expanded="false">Jogos</button>
        <ul class="submenu">
          <li><a href="#">Caça Palavras</a></li>
          <li><a href="#">Sudoku</a></li>
        </ul>
      </li>
      <li><a href="#">Últimas</a></li>
      <li class="dropdown">
        <button class="drop-btn" aria-expanded="false">Conteúdos</button>
        <ul class="submenu">
          <li><a href="#">Cultura</a></li>
          <li><a href="#">Economia</a></li>
          <li><a href="#">Educação</a></li>
        </ul>
      </li>
      <li><a href="#">Colunistas</a></li>
      <li class="dropdown">
        <button class="drop-btn" aria-expanded="false">Nossos Produtos</button>
        <ul class="submenu">
          <li><a href="#">Blog do Torcedor</a></li>
          <li><a href="#">Ne10 Interior</a></li>
          <li><a href="#">Radio Jornal</a></li>
          <li><a href="#">Receita da boa</a></li>
          <li><a href="#">Social1</a></li>
          <li><a href="#">TV jornal</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <button class="drop-btn" aria-expanded="false">Institucionais</button>
        <ul class="submenu">
          <li><a href="#">Sobre</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <button class="drop-btn" aria-expanded="false">Serviços</button>
        <ul class="submenu">
          <li><a href="#">Notícias pelo whatsapp</a></li>
          <li><a href="#">Newsletter JC</a></li>
          <li><a href="#">Anuncie conosco</a></li>
        </ul>
      </li>
    </ul>
  </nav>

  <!-- ===== CONTEÚDO PRINCIPAL ===== -->
  <main class="container">
    {% block content %}{% endblock %}
  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="jc-footer">
    <section class="produtos">
      <h2>Nossos Produtos</h2>
      <div class="produtos-logos">
        <img src="{% static 'noticias/img/ne10interior.png' %}" alt="NE10 Interior">
        <img src="{% static 'noticias/img/radiojornal.png' %}" alt="Rádio Jornal">
        <img src="{% static 'noticias/img/tvjornal.png' %}" alt="TV Jornal">
        <img src="{% static 'noticias/img/pejc.png' %}" alt="JCPE">
      </div>
    </section>

    <section class="redes">
      <img src="{% static 'noticias/img/jcpe.png' %}" alt="JCPE Logo" class="jcpe-logo">
      <p class="redes-titulo">Confira nossas redes</p>

      <div class="redes-icones">
        <a href="#" aria-label="Facebook"><img src="{% static 'noticias/img/facebook.png' %}" alt="Facebook"></a>
        <a href="#" aria-label="Instagram"><img src="{% static 'noticias/img/instagram.png' %}" alt="Instagram"></a>
        <a href="#" aria-label="X"><img src="{% static 'noticias/img/x.png' %}" alt="X"></a>
        <a href="#" aria-label="LinkedIn"><img src="{% static 'noticias/img/linkedin.png' %}" alt="LinkedIn"></a>
        <a href="#" aria-label="YouTube"><img src="{% static 'noticias/img/youtube.png' %}" alt="YouTube"></a>
      </div>

      <img src="{% static 'noticias/img/jcpm90.png' %}" alt="Grupo JCPM 90 anos" class="jcpm-logo">

      <p class="footer-text">
        Jornal © 2025 — Uma empresa do grupo JCPM<br>
        PARA SOLICITAÇÃO DE LICENCIAMENTO, CONTATAR<br>
        <a href="mailto:editores@ne10.com.br">EDITORES@NE10.COM.BR</a>
      </p>
    </section>
  </footer>

  {# === Gatilho do pop-up pós-signup vindo da view index === #}
  {% if show_welcome %}
    <script>
      window.SHOW_PERSONALIZACAO = true;
      window.JC_USER_NAME = "{{ welcome_name|default_if_none:''|escapejs }}";
    </script>
  {% endif %}

  {# === Inclusão do componente do modal (HTML+CSS+JS) === #}
  {% include "noticias/partials/popup_personalizacao.html" %}

  {% block extra_js %}
  <script src="{% static 'noticias/js/jc.js' %}"></script>
  <script src="{% static 'noticias/js/menu.js' %}"></script>
  {% endblock %}
</body>
</html>
